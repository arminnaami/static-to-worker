{"title":"架設百度貼吧雲簽到","slug":"deploy-tieba-cloud-sign","date":"2018-04-05T13:14:49.000Z","updated":"2019-08-16T11:14:47.578Z","comments":true,"path":"api/articles/deploy-tieba-cloud-sign.json","excerpt":"百度貼吧雲簽到 是一個開源的 php 程式，可以架設出一個自動簽到百度貼吧的系統Google 到很多貼吧 自動簽到之類的網站很多都是用這個系統的所以我就用 GearHost 的免費伺服器和資料庫就架了一個私人使用的簽到伺服器","covers":["example.png"],"content":"<p><a href=\"https://github.com/MoeNetwork/Tieba-Cloud-Sign\" target=\"_blank\" rel=\"noopener\">百度貼吧雲簽到</a> 是一個開源的 php 程式，可以架設出一個自動簽到百度貼吧的系統</p>\n<p>Google 到很多<code>貼吧 自動簽到</code>之類的網站很多都是用這個系統的</p>\n<p>所以我就用 <a href=\"https://www.gearhost.com/\" target=\"_blank\" rel=\"noopener\">GearHost</a> 的免費伺服器和資料庫就架了一個私人使用的簽到伺服器</p>\n<a id=\"more\"></a>\n\n<p><img src=\"example.png\" alt=\"example\"></p>\n<h1 id=\"教學\"><a href=\"#教學\" class=\"headerlink\" title=\"教學\"></a>教學</h1><h2 id=\"註冊-GearHost-帳號-選擇性\"><a href=\"#註冊-GearHost-帳號-選擇性\" class=\"headerlink\" title=\"註冊 GearHost 帳號(選擇性)\"></a>註冊 GearHost 帳號(選擇性)</h2><blockquote>\n<p>如果有其他有 php 和 mysql 伺服器可以直接跳過這一步</p>\n</blockquote>\n<p>到 <a href=\"https://www.gearhost.com/\" target=\"_blank\" rel=\"noopener\">GearHost</a> 註冊一個帳號</p>\n<p>然後在管理頁面中左側找到 <code>CloudSites</code> 和 <code>Databases</code>，分別建立一個網站和資料庫</p>\n<p>關於資料庫請務必選擇 <code>MYSQL</code>，不要選到其他的</p>\n<h2 id=\"下載與設定\"><a href=\"#下載與設定\" class=\"headerlink\" title=\"下載與設定\"></a>下載與設定</h2><p>在 <a href=\"https://github.com/MoeNetwork/Tieba-Cloud-Sign/releases\" target=\"_blank\" rel=\"noopener\">releases</a> 頁面上找到一個想要的版本下載(我用 V4.9)</p>\n<p>下載後解壓縮到任何一個資料夾，然後打開裡面有個檔案 <code>config.php</code></p>\n<p>在裡面找到下面的文字，按照注釋修改</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">////////////////////////////以下选项只需在使用MySQL时填写////////////////////////////</span></span><br><span class=\"line\"><span class=\"comment\">//MySQL 数据库地址，普通主机一般为localhost</span></span><br><span class=\"line\">define(<span class=\"string\">'DB_HOST'</span>,<span class=\"string\">'資料庫位置'</span>);</span><br><span class=\"line\"><span class=\"comment\">//MySQL 数据库用户名</span></span><br><span class=\"line\">define(<span class=\"string\">'DB_USER'</span>,<span class=\"string\">'使用者名稱'</span>);</span><br><span class=\"line\"><span class=\"comment\">//MySQL 数据库密码</span></span><br><span class=\"line\">define(<span class=\"string\">'DB_PASSWD'</span>,<span class=\"string\">'使用者密碼'</span>);</span><br><span class=\"line\"><span class=\"comment\">//MySQL 数据库名称</span></span><br><span class=\"line\">define(<span class=\"string\">'DB_NAME'</span>,<span class=\"string\">'資料庫名稱'</span>);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"上傳網站-GearHost\"><a href=\"#上傳網站-GearHost\" class=\"headerlink\" title=\"上傳網站 (GearHost)\"></a>上傳網站 (GearHost)</h2><blockquote>\n<p>其他伺服器請用各自支援的方式上傳</p>\n</blockquote>\n<p>輸入下方的指令來建立一個 git repo</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git init</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m <span class=\"string\">\"init\"</span></span><br></pre></td></tr></table></figure>\n\n<p>然後到剛剛新增的網站頁面找到 <code>Deploy</code> 點進去</p>\n<p>然後在下面找到 <code>LocalGit</code> 的來啟用後會看到下面的資訊</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Git URL: GITURL</span><br><span class=\"line\">Username: USERNAME</span><br><span class=\"line\">Password: PASSWORD</span><br></pre></td></tr></table></figure>\n\n<p>使用上面的資訊依序輸入指令，如果有遇到到要輸入帳號密碼的就填進去就好</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add deploy GITURL</span><br><span class=\"line\">git push -u deploy master</span><br></pre></td></tr></table></figure>\n\n<p>然後完成之後在頁面上找到 <code>Launch CloudSite</code> 就能進入網頁的安裝介面了</p>\n<h2 id=\"安裝\"><a href=\"#安裝\" class=\"headerlink\" title=\"安裝\"></a>安裝</h2><p>安裝介面都是中文，只看字應該沒問題</p>\n<p>不過在第三步驟會問你是否已經設定過資料庫了，那邊請選擇 <code>是</code> 就好</p>\n<p>接下來完成後進入首頁，用在第三步驟設定的管理員帳號登入就 ok 了</p>\n<h2 id=\"排程\"><a href=\"#排程\" class=\"headerlink\" title=\"排程\"></a>排程</h2><p>因為它沒辦法自己定時做一些工作(簽到、刷新列表等…)，所以需要使用 cron 來定時</p>\n<p>不過對於它來說我覺得使用 <a href=\"https://cron-job.org/en/\" target=\"_blank\" rel=\"noopener\">cron-job</a> 這個免費服務比較適合，也更簡單</p>\n<p>到它的網站上註冊一個帳號，然後到 <a href=\"https://cron-job.org/en/members/jobs/add/\" target=\"_blank\" rel=\"noopener\">Create cronjobs</a> 頁面中新增一個排程</p>\n<p>title 隨便取，而網址要設定到網站下的 <code>/do.php</code> 才行</p>\n<p>例如: <code>https://MY_TIEBA_CLOUD_SIGN_SERVER.net/do.php</code></p>\n<p>而 Schedule 我是設成每 30 分執行一次，可以按照自己需求調整</p>\n<blockquote>\n<p>建議不要設定為一天只執行一次<br>因為預設設定每次簽到只會簽到 10 個吧(能自己調整設定)</p>\n</blockquote>\n<p>然後後面其他設定可以按照自己需求調整，最後按下 <code>Save</code> 儲存設定就完成了</p>\n<h1 id=\"Gravatar\"><a href=\"#Gravatar\" class=\"headerlink\" title=\"Gravatar\"></a>Gravatar</h1><p>雖然它有支援 Gravatar，但是使用的是架在中國的 Gravatar mirror 伺服器(而且還掛掉了)</p>\n<p>不過這是可以更改的，我是把它改成官方的</p>\n<p>在 <code>lib/sfc.functions.php</code> 中找到函數 <code>gravatar</code> (約在 90 行左右)</p>\n<p>把它改成下方這樣，然後重新上傳後應該就 ok 了</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">gravatar</span><span class=\"params\">($email, $s = <span class=\"number\">140</span>, $d = <span class=\"string\">'mm'</span>, $g = <span class=\"string\">'g'</span>, $site = <span class=\"string\">'moefont'</span>)</span> </span>&#123;</span><br><span class=\"line\">  $hash = md5($email);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"https://www.gravatar.com/avatar/$hash?s=$s&amp;r=$g\"</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"插件\"><a href=\"#插件\" class=\"headerlink\" title=\"插件\"></a>插件</h1><p><a href=\"https://github.com/MoeNetwork/Tieba-Cloud-Sign/wiki/%E8%B4%B4%E5%90%A7%E4%BA%91%E7%AD%BE%E5%88%B0%E6%8F%92%E4%BB%B6%E5%BA%93\" target=\"_blank\" rel=\"noopener\">官方插件列表</a></p>\n<p>插件的其中一種安裝方法是直接在管理員介面中上傳 zip 檔就好</p>\n<p>另一種是把 zip 解壓縮出來的資料夾放到 <code>plugins</code> 資料夾中</p>\n<blockquote>\n<p>需要讓插件的資料夾名稱和裡面的主要 php 主檔名相同<br>Ex: <code>plugins/pch18_relist/pch18_relist.php</code></p>\n</blockquote>\n<h1 id=\"使用我架的伺服器\"><a href=\"#使用我架的伺服器\" class=\"headerlink\" title=\"使用我架的伺服器\"></a>使用我架的伺服器</h1><p>如果想直接使用的話可以到 <a href=\"https://bdtcs.maple3142.net/\" target=\"_blank\" rel=\"noopener\">BDTCS</a> 中使用註冊碼 <code>blog.maple3142.net</code> 註冊帳號</p>\n<p>不過不保證會一直開啟註冊，也不保證穩定信</p>\n<ul>\n<li>2018/4/5 開放註冊，註冊碼 <code>blog.maple3142.net</code></li>\n</ul>\n","more":"<p><img src=\"example.png\" alt=\"example\"></p>\n<h1 id=\"教學\"><a href=\"#教學\" class=\"headerlink\" title=\"教學\"></a>教學</h1><h2 id=\"註冊-GearHost-帳號-選擇性\"><a href=\"#註冊-GearHost-帳號-選擇性\" class=\"headerlink\" title=\"註冊 GearHost 帳號(選擇性)\"></a>註冊 GearHost 帳號(選擇性)</h2><blockquote>\n<p>如果有其他有 php 和 mysql 伺服器可以直接跳過這一步</p>\n</blockquote>\n<p>到 <a href=\"https://www.gearhost.com/\" target=\"_blank\" rel=\"noopener\">GearHost</a> 註冊一個帳號</p>\n<p>然後在管理頁面中左側找到 <code>CloudSites</code> 和 <code>Databases</code>，分別建立一個網站和資料庫</p>\n<p>關於資料庫請務必選擇 <code>MYSQL</code>，不要選到其他的</p>\n<h2 id=\"下載與設定\"><a href=\"#下載與設定\" class=\"headerlink\" title=\"下載與設定\"></a>下載與設定</h2><p>在 <a href=\"https://github.com/MoeNetwork/Tieba-Cloud-Sign/releases\" target=\"_blank\" rel=\"noopener\">releases</a> 頁面上找到一個想要的版本下載(我用 V4.9)</p>\n<p>下載後解壓縮到任何一個資料夾，然後打開裡面有個檔案 <code>config.php</code></p>\n<p>在裡面找到下面的文字，按照注釋修改</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">////////////////////////////以下选项只需在使用MySQL时填写////////////////////////////</span></span><br><span class=\"line\"><span class=\"comment\">//MySQL 数据库地址，普通主机一般为localhost</span></span><br><span class=\"line\">define(<span class=\"string\">'DB_HOST'</span>,<span class=\"string\">'資料庫位置'</span>);</span><br><span class=\"line\"><span class=\"comment\">//MySQL 数据库用户名</span></span><br><span class=\"line\">define(<span class=\"string\">'DB_USER'</span>,<span class=\"string\">'使用者名稱'</span>);</span><br><span class=\"line\"><span class=\"comment\">//MySQL 数据库密码</span></span><br><span class=\"line\">define(<span class=\"string\">'DB_PASSWD'</span>,<span class=\"string\">'使用者密碼'</span>);</span><br><span class=\"line\"><span class=\"comment\">//MySQL 数据库名称</span></span><br><span class=\"line\">define(<span class=\"string\">'DB_NAME'</span>,<span class=\"string\">'資料庫名稱'</span>);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"上傳網站-GearHost\"><a href=\"#上傳網站-GearHost\" class=\"headerlink\" title=\"上傳網站 (GearHost)\"></a>上傳網站 (GearHost)</h2><blockquote>\n<p>其他伺服器請用各自支援的方式上傳</p>\n</blockquote>\n<p>輸入下方的指令來建立一個 git repo</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git init</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m <span class=\"string\">\"init\"</span></span><br></pre></td></tr></table></figure>\n\n<p>然後到剛剛新增的網站頁面找到 <code>Deploy</code> 點進去</p>\n<p>然後在下面找到 <code>LocalGit</code> 的來啟用後會看到下面的資訊</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Git URL: GITURL</span><br><span class=\"line\">Username: USERNAME</span><br><span class=\"line\">Password: PASSWORD</span><br></pre></td></tr></table></figure>\n\n<p>使用上面的資訊依序輸入指令，如果有遇到到要輸入帳號密碼的就填進去就好</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add deploy GITURL</span><br><span class=\"line\">git push -u deploy master</span><br></pre></td></tr></table></figure>\n\n<p>然後完成之後在頁面上找到 <code>Launch CloudSite</code> 就能進入網頁的安裝介面了</p>\n<h2 id=\"安裝\"><a href=\"#安裝\" class=\"headerlink\" title=\"安裝\"></a>安裝</h2><p>安裝介面都是中文，只看字應該沒問題</p>\n<p>不過在第三步驟會問你是否已經設定過資料庫了，那邊請選擇 <code>是</code> 就好</p>\n<p>接下來完成後進入首頁，用在第三步驟設定的管理員帳號登入就 ok 了</p>\n<h2 id=\"排程\"><a href=\"#排程\" class=\"headerlink\" title=\"排程\"></a>排程</h2><p>因為它沒辦法自己定時做一些工作(簽到、刷新列表等…)，所以需要使用 cron 來定時</p>\n<p>不過對於它來說我覺得使用 <a href=\"https://cron-job.org/en/\" target=\"_blank\" rel=\"noopener\">cron-job</a> 這個免費服務比較適合，也更簡單</p>\n<p>到它的網站上註冊一個帳號，然後到 <a href=\"https://cron-job.org/en/members/jobs/add/\" target=\"_blank\" rel=\"noopener\">Create cronjobs</a> 頁面中新增一個排程</p>\n<p>title 隨便取，而網址要設定到網站下的 <code>/do.php</code> 才行</p>\n<p>例如: <code>https://MY_TIEBA_CLOUD_SIGN_SERVER.net/do.php</code></p>\n<p>而 Schedule 我是設成每 30 分執行一次，可以按照自己需求調整</p>\n<blockquote>\n<p>建議不要設定為一天只執行一次<br>因為預設設定每次簽到只會簽到 10 個吧(能自己調整設定)</p>\n</blockquote>\n<p>然後後面其他設定可以按照自己需求調整，最後按下 <code>Save</code> 儲存設定就完成了</p>\n<h1 id=\"Gravatar\"><a href=\"#Gravatar\" class=\"headerlink\" title=\"Gravatar\"></a>Gravatar</h1><p>雖然它有支援 Gravatar，但是使用的是架在中國的 Gravatar mirror 伺服器(而且還掛掉了)</p>\n<p>不過這是可以更改的，我是把它改成官方的</p>\n<p>在 <code>lib/sfc.functions.php</code> 中找到函數 <code>gravatar</code> (約在 90 行左右)</p>\n<p>把它改成下方這樣，然後重新上傳後應該就 ok 了</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">gravatar</span><span class=\"params\">($email, $s = <span class=\"number\">140</span>, $d = <span class=\"string\">'mm'</span>, $g = <span class=\"string\">'g'</span>, $site = <span class=\"string\">'moefont'</span>)</span> </span>&#123;</span><br><span class=\"line\">  $hash = md5($email);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"https://www.gravatar.com/avatar/$hash?s=$s&amp;r=$g\"</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"插件\"><a href=\"#插件\" class=\"headerlink\" title=\"插件\"></a>插件</h1><p><a href=\"https://github.com/MoeNetwork/Tieba-Cloud-Sign/wiki/%E8%B4%B4%E5%90%A7%E4%BA%91%E7%AD%BE%E5%88%B0%E6%8F%92%E4%BB%B6%E5%BA%93\" target=\"_blank\" rel=\"noopener\">官方插件列表</a></p>\n<p>插件的其中一種安裝方法是直接在管理員介面中上傳 zip 檔就好</p>\n<p>另一種是把 zip 解壓縮出來的資料夾放到 <code>plugins</code> 資料夾中</p>\n<blockquote>\n<p>需要讓插件的資料夾名稱和裡面的主要 php 主檔名相同<br>Ex: <code>plugins/pch18_relist/pch18_relist.php</code></p>\n</blockquote>\n<h1 id=\"使用我架的伺服器\"><a href=\"#使用我架的伺服器\" class=\"headerlink\" title=\"使用我架的伺服器\"></a>使用我架的伺服器</h1><p>如果想直接使用的話可以到 <a href=\"https://bdtcs.maple3142.net/\" target=\"_blank\" rel=\"noopener\">BDTCS</a> 中使用註冊碼 <code>blog.maple3142.net</code> 註冊帳號</p>\n<p>不過不保證會一直開啟註冊，也不保證穩定信</p>\n<ul>\n<li>2018/4/5 開放註冊，註冊碼 <code>blog.maple3142.net</code></li>\n</ul>","categories":[{"name":"教學","path":"api/categories/教學.json"}],"tags":[{"name":"php","path":"api/tags/php.json"}]}